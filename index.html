<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>JAMAL MONTGOMERY - VOODOO FOOD</title>
    <!-- Inclusion de React, ReactDOM et Babel via CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Importation des polices Google Fonts -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap');
    </style>
    <style>
        /* Styles CSS */
        body {
            margin: 0;
            padding: 0;
            background-color: #FFFEF5; /* Couleur crème très légère */
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Roboto Mono', monospace;
            margin: 0;
            padding: 0;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header {
            width: 100%;
            padding: 2em;
            box-sizing: border-box;
            text-align: center;
            position: relative;
            overflow: hidden; /* Pour contenir les images positionnées absolument */
        }

        .header h1 {
            font-size: 6vw;
            font-weight: bold;
            color: #FF5722;
            transform: rotate(-5deg);
            margin: 0.5em 0;
        }

        .header h2 {
            font-size: 4vw;
            color: #2196F3;
            transform: rotate(5deg);
            margin: 0.5em 0;
        }

        .header h3, .header h4 {
            font-size: 1.5vw;
            color: #000;
            margin: 0.5em 0;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 10vw;
            }
            .header h2 {
                font-size: 7vw;
            }
            .header h3, .header h4 {
                font-size: 3vw;
            }
        }

        .gallery {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1em;
            padding: 2em;
            width: 100%;
            box-sizing: border-box;
        }

        .gallery img {
            width: 100%;
            height: auto;
            object-fit: cover;
            transition: opacity 1s ease-in-out;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .gallery {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 1024px) {
            .gallery {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .footer {
            padding: 2em;
            text-align: center;
            font-size: 0.8em;
            color: #777;
        }

        /* Styles pour les éléments animés dans le header */
        .header .animated-element {
            position: absolute;
            width: 20%; /* Taille ajustée */
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease-in-out, filter 1s ease-in-out;
            filter: blur(10px);
        }

        @media (max-width: 768px) {
            .header .animated-element {
                width: 35%; /* Taille sur les petits écrans */
            }
        }

        /* Styles pour le plein écran */
        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .fullscreen img {
            max-width: 90%;
            max-height: 90%;
            cursor: pointer;
        }
    </style>
    <!-- Script pour désactiver le clic droit -->
    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
    </script>
</head>
<body>
    <div id="root"></div>
    <!-- Ajout de data-presets="env,react" -->
    <script type="text/babel" data-presets="env,react">
        // Code JSX
        function App() {
            return (
                <div className="container">
                    <Header />
                    <Gallery />
                    <Footer />
                </div>
            );
        }

        function Header() {
            const headerRef = React.useRef(null);

            return (
                <header className="header" ref={headerRef}>
                    <h1>JAMAL MONTGOMERY</h1>
                    <h2>Directeur Artistique</h2>
                    <h3>Voodoo Food Digger.</h3>
                    <h4>Based in Marseille, shaped by its esoteric forces.</h4>
                    <AnimatedElements headerRef={headerRef} />
                </header>
            );
        }

        function AnimatedElements({ headerRef }) {
            const images = [
                'https://www.zupimages.net/up/24/41/3ln2.png',
                'https://www.zupimages.net/up/24/41/5vx9.png',
                'https://www.zupimages.net/up/24/41/hjak.png',
                'https://www.zupimages.net/up/24/41/mnyg.png'
            ];

            const [elements, setElements] = React.useState([]);

            React.useEffect(() => {
                const timeouts = [];

                images.forEach((src, index) => {
                    const delay = index * 1000; // Démarrage échelonné
                    const timeoutId = setTimeout(() => {
                        animateElement(src);
                    }, delay);
                    timeouts.push(timeoutId);
                });

                return () => {
                    timeouts.forEach(timeout => clearTimeout(timeout));
                };
            }, []);

            function animateElement(src) {
                const durationVisible = Math.random() * 2000 + 3000; // 3 à 5 secondes
                const durationHidden = Math.random() * 3000 + 2000; // 2 à 5 secondes

                const id = Math.random().toString(36).substr(2, 9);

                const element = {
                    id: id,
                    src: src,
                    style: getRandomPosition(),
                    visible: true,
                };

                setElements(prev => [...prev, element]);

                setTimeout(() => {
                    setElements(prev => prev.filter(e => e.id !== id));
                    setTimeout(() => {
                        animateElement(src);
                    }, durationHidden);
                }, durationVisible);
            }

            function getRandomPosition() {
                const header = headerRef.current;
                if (header) {
                    const headerRect = header.getBoundingClientRect();
                    const headerHeight = headerRect.height;
                    const headerWidth = headerRect.width;

                    // Get the image dimensions
                    const imageWidthPercentage = window.innerWidth <= 768 ? 35 : 20;
                    const imageWidth = headerWidth * (imageWidthPercentage / 100);

                    // Assume images are square
                    const imageHeight = imageWidth;

                    // Calculate max top and left positions
                    const maxTop = headerHeight - imageHeight;
                    const maxLeft = headerWidth - imageWidth;

                    const top = Math.random() * maxTop;
                    const left = Math.random() * maxLeft;

                    return {
                        top: top + 'px',
                        left: left + 'px',
                    };
                } else {
                    // Valeurs par défaut si headerRef n'est pas disponible
                    return {
                        top: '0px',
                        left: '0px',
                    };
                }
            }

            return (
                <>
                    {elements.map(element => (
                        <img
                            key={element.id}
                            src={element.src}
                            alt="Animated Element"
                            className="animated-element"
                            style={{
                                ...element.style,
                                opacity: element.visible ? 1 : 0,
                                filter: element.visible ? 'blur(0px)' : 'blur(10px)',
                            }}
                        />
                    ))}
                </>
            );
        }

        function Gallery() {
            const allImages = [
                // Images spéciales
                'https://www.zupimages.net/up/24/42/qmbc.png',
                'https://www.zupimages.net/up/24/42/7ufu.png',
                'https://www.zupimages.net/up/24/42/batj.png',
                // Nouvelles images
                'https://www.zupimages.net/up/24/42/d470.png',
                'https://www.zupimages.net/up/24/42/2cjk.png',
                'https://www.zupimages.net/up/24/42/pwwm.jpg',
                'https://www.zupimages.net/up/24/42/roqr.jpg',
                'https://www.zupimages.net/up/24/42/808q.jpg',
                'https://www.zupimages.net/up/24/42/1utt.jpg',
                'https://www.zupimages.net/up/24/42/sx5a.jpg',
                'https://www.zupimages.net/up/24/42/un6z.jpg',
                'https://www.zupimages.net/up/24/42/v3t7.jpg',
                'https://www.zupimages.net/up/24/42/5moz.jpg',
                'https://www.zupimages.net/up/24/42/rdoz.jpg',
                'https://www.zupimages.net/up/24/42/ys71.jpg',
                'https://www.zupimages.net/up/24/42/rpps.png',
                'https://www.zupimages.net/up/24/42/z8l0.jpg',
                'https://www.zupimages.net/up/24/42/15m4.jpg',
            ];

            const specialImages = [
                'https://www.zupimages.net/up/24/42/qmbc.png',
                'https://www.zupimages.net/up/24/42/7ufu.png',
                'https://www.zupimages.net/up/24/42/batj.png'
            ];

            const numImagesToDisplay = 8; // Nombre d'images à afficher
            const [currentImages, setCurrentImages] = React.useState([]);
            const [fullscreenImage, setFullscreenImage] = React.useState(null);

            React.useEffect(() => {
                // Sélection initiale des images
                const initialImages = [];
                const usedIndices = new Set();
                let specialImageIncluded = false;

                while (initialImages.length < numImagesToDisplay && usedIndices.size < allImages.length) {
                    const index = Math.floor(Math.random() * allImages.length);
                    if (!usedIndices.has(index)) {
                        const selectedImage = allImages[index];
                        const isSpecial = specialImages.includes(selectedImage);

                        if (isSpecial) {
                            if (!specialImageIncluded) {
                                // Inclure une image spéciale
                                specialImageIncluded = true;
                                usedIndices.add(index);
                                initialImages.push(selectedImage);
                            } else {
                                // Ignorer cette image spéciale
                                continue;
                            }
                        } else {
                            usedIndices.add(index);
                            initialImages.push(selectedImage);
                        }
                    }
                }
                setCurrentImages(initialImages);

                // Configuration de l'intervalle pour changer les images
                const interval = setInterval(() => {
                    setCurrentImages(prevImages => {
                        const newImages = [...prevImages];
                        const replaceIndex = Math.floor(Math.random() * newImages.length);

                        // Retirer l'image à replaceIndex
                        const removedImage = newImages[replaceIndex];

                        // Créer une liste d'images disponibles
                        let availableImages = allImages.filter(img => !newImages.includes(img));

                        // Vérifier si des images spéciales sont déjà affichées
                        const specialImagesDisplayed = newImages.filter(img => specialImages.includes(img));

                        if (specialImagesDisplayed.length >= 1) {
                            // Ne pas sélectionner d'images spéciales
                            availableImages = availableImages.filter(img => !specialImages.includes(img));
                        } else {
                            // Inclure une image spéciale si aucune n'est affichée
                        }

                        if (availableImages.length === 0) {
                            // Pas d'images disponibles, retourner les images actuelles
                            return newImages;
                        }

                        const newImage = availableImages[Math.floor(Math.random() * availableImages.length)];

                        newImages[replaceIndex] = newImage;

                        return newImages;
                    });
                }, 1500); // Changer une image toutes les 1,5 secondes

                return () => clearInterval(interval);
            }, []);

            const handleImageClick = (src) => {
                setFullscreenImage(src);
            };

            const handleFullscreenClick = () => {
                setFullscreenImage(null);
            };

            return (
                <>
                    <div className="gallery">
                        {currentImages.map((src, index) => (
                            <Image
                                key={index}
                                src={src}
                                alt={`Artwork ${index + 1}`}
                                index={index}
                                onClick={() => handleImageClick(src)}
                            />
                        ))}
                    </div>
                    {fullscreenImage && (
                        <FullscreenImage src={fullscreenImage} onClick={handleFullscreenClick} />
                    )}
                </>
            );
        }

        function Image({ src, alt, index, onClick }) {
            const [visible, setVisible] = React.useState(false);

            React.useEffect(() => {
                setVisible(true);
                return () => setVisible(false);
            }, [src]);

            return (
                <img
                    src={src}
                    alt={alt}
                    onClick={onClick}
                    style={{
                        opacity: visible ? 1 : 0,
                        transition: 'opacity 1s ease-in-out',
                        transform: `rotate(${(index % 2 === 0 ? '-' : '') + Math.floor(Math.random() * 10)}deg)`
                    }}
                />
            );
        }

        function FullscreenImage({ src, onClick }) {
            const colors = ['green', 'yellow', 'red', 'blue'];
            const [backgroundColor] = React.useState(colors[Math.floor(Math.random() * colors.length)]);

            return (
                <div
                    className="fullscreen"
                    onClick={onClick}
                    style={{ backgroundColor: backgroundColor }}
                >
                    <img src={src} alt="Fullscreen" />
                </div>
            );
        }

        function Footer() {
            return (
                <footer className="footer">
                    <p>© {new Date().getFullYear()} JAMAL MONTGOMERY</p>
                </footer>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
